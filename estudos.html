<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>DT School - IA</title>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="estilo.css?v=12.0">
    <link rel="stylesheet" href="ia-estilo.css?v=5.0">
    <style>
        /* Ajuste rápido para garantir que o layout não quebre */
        body { 
            background: #05050a; 
            overflow: hidden; 
            height: 100vh; 
            display: flex; 
            flex-direction: column; 
            margin: 0;
        }
        .aba-conteudo { display: none; flex: 1; flex-direction: column; overflow-y: auto; }
        .aba-conteudo.active { display: flex; }
    </style>
</head>
<body>
    
    <header class="glass-header">
        <button onclick="window.location.href='index.html'" class="btn-icon">
            <i data-lucide="arrow-left"></i>
        </button>
        <h1 class="topo-compacto">DT Inteligência</h1>
        <div style="width: 38px;"></div>
    </header>

    <div class="abas-container">
        <button id="tab-simulado" class="tab-btn active" onclick="trocarAba('simulado')">Simulado</button>
        <button id="tab-chat" class="tab-btn" onclick="trocarAba('chat')">Tira-Dúvidas</button>
    </div>

    <main class="container" style="flex: 1; display: flex; flex-direction: column; overflow: hidden; padding: 10px;">
        
        <section id="secao-simulado" class="aba-conteudo active">
            <div class="materia-card">
                <h3 class="titulo-ia">Gerar Questões</h3>
                <input type="text" id="assunto-ia" placeholder="Ex: Egito Antigo" class="input-ia">
                
                <select id="nivel-ia" class="input-ia">
                    <option value="6º ano EF">6º ano EF</option>
                    <option value="7º ano EF">7º ano EF</option>
                    <option value="8º ano EF">8º ano EF</option>
                    <option value="9º ano EF">9º ano EF</option>
                    <option value="1º ano EM">1º ano EM</option>
                    <option value="2º ano EM" selected>2º ano EM</option>
                    <option value="3º ano EM">3º ano EM</option>
                </select>
                
                <button onclick="gerarQuestoes()" id="btn-gerar" class="btn-modal-acao" style="width: 100%;">
                    Gerar 10 Questões
                </button>
            </div>
            
            <div id="container-questoes" style="margin-top: 10px; padding-bottom: 30px;">
                </div>
        </section>

        <section id="secao-chat" class="aba-conteudo">
            <div class="chat-wrapper" style="display: flex; flex-direction: column; height: 100%;">
                <div id="chat-respostas" class="chat-box" style="flex: 1; overflow-y: auto; padding-bottom: 10px;">
                    <div class="msg-ia">Olá! Sou sua IA de estudos. Suas conversas agora ficam salvas! O que vamos aprender?</div>
                </div>
                
                <div class="input-chat-container">
                    <input type="text" id="pergunta-ia" placeholder="Sua dúvida..." onkeypress="if(event.key==='Enter') perguntarIA()">
                    <button onclick="perguntarIA()" id="btn-perguntar" class="btn-send">
                        <i data-lucide="send" style="width: 20px;"></i>
                    </button>
                </div>
            </div>
        </section>

    </main>

    <script src="ia-logica.js?v=5.0"></script>
    <script>
        // Inicializa os ícones do Lucide
        lucide.createIcons();

        //
        
